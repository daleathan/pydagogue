

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Development workflow &mdash; pydagogue 0.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="pydagogue 0.2 documentation" href="../index.html" />
    <link rel="up" title="Git for development" href="git_development.html" />
    <link rel="next" title="git resources" href="git_resources.html" />
    <link rel="prev" title="Configure git" href="configure_git.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="git_resources.html" title="git resources"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="configure_git.html" title="Configure git"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">pydagogue 0.2 documentation</a> &raquo;</li>
          <li><a href="../gitwash_build.html" >Gitwash build</a> &raquo;</li>
          <li><a href="index.html" >Working with <em>gitwash</em> source code</a> &raquo;</li>
          <li><a href="git_development.html" accesskey="U">Git for development</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="development-workflow">
<span id="id1"></span><h1>Development workflow<a class="headerlink" href="#development-workflow" title="Permalink to this headline">¶</a></h1>
<p>You already have your own forked copy of the <a class="reference external" href="http://github.com/matthew-brett/gitwash">gitwash</a> repository, by
following <a class="reference internal" href="forking_hell.html#forking"><em>Making your own copy (fork) of gitwash</em></a>, <a class="reference internal" href="set_up_fork.html#set-up-fork"><em>Set up your fork</em></a>, and you have configured
git by following <a class="reference internal" href="configure_git.html#configure-git"><em>Configure git</em></a>.</p>
<div class="section" id="workflow-summary">
<h2>Workflow summary<a class="headerlink" href="#workflow-summary" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Make a <tt class="docutils literal"><span class="pre">main-master</span></tt> branch to keep track of the changes in the upstream
master branch. We&#8217;ll call the upstream master branch &#8220;trunk&#8221; in the rest of
this page.</li>
<li>Don&#8217;t use your <tt class="docutils literal"><span class="pre">master</span></tt> branch for anything.  Consider deleting it.</li>
<li>When you are starting a new set of changes, update the <tt class="docutils literal"><span class="pre">main-master</span></tt> branch,
and start a new <em>feature branch</em> from that.</li>
<li>Make a new branch for each separable set of changes.</li>
<li>If you can possibly avoid it, try not to merge other branches into your
feature branch while you are working.</li>
<li>If you do find yourself merging from another branch, consider <tt class="docutils literal"><span class="pre">git</span> <span class="pre">rebase</span></tt></li>
<li>Ask for review!</li>
</ul>
<p>This way of working really helps to keep work well organized, and in
keeping history as clear as possible.</p>
<p>See — for example — <a class="reference external" href="http://www.mail-archive.com/dri-devel&#64;lists.sourceforge.net/msg39091.html">linux git workflow</a>.</p>
</div>
<div class="section" id="make-a-branch-to-keep-track-of-trunk">
<h2>Make a branch to keep track of trunk<a class="headerlink" href="#make-a-branch-to-keep-track-of-trunk" title="Permalink to this headline">¶</a></h2>
<p>Here we make a branch to keep track of the upstream <a class="reference external" href="http://github.com/gitwash/gitwash">gitwash github</a>  repo.</p>
<div class="section" id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>Once per repository clone:</p>
<div class="highlight-python"><pre># make a tracking branch to track upstream
git branch main-master --track upstream/master</pre>
</div>
<p>From time to time, to pull down the latest changes:</p>
<div class="highlight-python"><pre># go to your main-master tracking branch
git checkout main-master
# get upstream changes from github
git fetch upstream
# merge from upstream
git merge upstream/master</pre>
</div>
<p>We&#8217;ve used the name <tt class="docutils literal"><span class="pre">main-master</span></tt> to remind ourselves that this is
the upstream branch.</p>
</div>
<div class="section" id="in-detail">
<h3>In detail<a class="headerlink" href="#in-detail" title="Permalink to this headline">¶</a></h3>
<p>We suggest that you only merge the upstream changes into your <tt class="docutils literal"><span class="pre">main-master</span></tt>
branch, and leave your &#8216;feature&#8217; branches unmerged.  This keeps your code
history clean and makes code review easier.</p>
<p>First make sure you have done <a class="reference internal" href="set_up_fork.html#linking-to-upstream"><em>Linking your repository to the upstream repo</em></a>.</p>
<p>Next make the upstream tracking branch.  You need to do this once for each clone
you have made:</p>
<div class="highlight-python"><pre>git branch main-master --track upstream/master</pre>
</div>
<p>This <tt class="docutils literal"><span class="pre">main-master</span></tt> branch will only contain the state of the upstream code.
That is, please be careful not to make your own changes in this branch, as
things will start to get confusing.</p>
<p>To update your <tt class="docutils literal"><span class="pre">main-master</span></tt> branch with the latest upstream changes:</p>
<div class="highlight-python"><pre>git checkout main-master
git fetch upstream
git merge upstream/master</pre>
</div>
</div>
</div>
<div class="section" id="consider-deleting-your-master-branch">
<h2>Consider deleting your master branch<a class="headerlink" href="#consider-deleting-your-master-branch" title="Permalink to this headline">¶</a></h2>
<p>It may sound strange, but deleting your own <tt class="docutils literal"><span class="pre">master</span></tt> branch can help reduce
confusion about which branch you are on.  See <a class="reference external" href="http://matthew-brett.github.com/pydagogue/gh_delete_master.html">deleting master on github</a> for
details.</p>
</div>
<div class="section" id="make-a-new-feature-branch">
<h2>Make a new feature branch<a class="headerlink" href="#make-a-new-feature-branch" title="Permalink to this headline">¶</a></h2>
<p>When you are ready to make some changes to the code, you should start a new
branch.  Branches that are for a collection of related edits are often called
&#8216;feature branches&#8217;.</p>
<div class="highlight-python"><pre># Make new feature branch starting at current trunk
git branch my-new-feature main-master
git checkout my-new-feature</pre>
</div>
<p>Generally, you will want to keep your feature branches on your public <a class="reference external" href="http://github.com">github</a>
fork of <a class="reference external" href="http://github.com/matthew-brett/gitwash">gitwash</a>.  To do this, you <a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-push.html">git push</a> this new branch up to your
github repo.  Generally (if you followed the instructions in these pages, and by
default), git will have a link to your github repo, called <tt class="docutils literal"><span class="pre">origin</span></tt>.  You push
up to your own repo on github with:</p>
<div class="highlight-python"><pre>git push origin my-new-feature</pre>
</div>
<p>In git &gt; 1.7 you can ensure that the link is correctly set by using the
<tt class="docutils literal"><span class="pre">--set-upstream</span></tt> option:</p>
<div class="highlight-python"><pre>git push --set-upstream origin my-new-feature</pre>
</div>
<p>From now on git will know that <tt class="docutils literal"><span class="pre">my-new-feature</span></tt> is related to the
<tt class="docutils literal"><span class="pre">my-new-feature</span></tt> branch in the github repo.</p>
</div>
<div class="section" id="the-editing-workflow">
<h2>The editing workflow<a class="headerlink" href="#the-editing-workflow" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3>Overview<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre># hack hack
git add my_new_file
git commit -am 'NF - some message'
git push</pre>
</div>
</div>
<div class="section" id="in-more-detail">
<h3>In more detail<a class="headerlink" href="#in-more-detail" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Make some changes</p>
</li>
<li><p class="first">See which files have changed with <tt class="docutils literal"><span class="pre">git</span> <span class="pre">status</span></tt> (see <a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-status.html">git status</a>).
You&#8217;ll see a listing like this one:</p>
<div class="highlight-python"><pre># On branch ny-new-feature
# Changed but not updated:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#  modified:   README
#
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
#  INSTALL
no changes added to commit (use "git add" and/or "git commit -a")</pre>
</div>
</li>
<li><p class="first">Check what the actual changes are with <tt class="docutils literal"><span class="pre">git</span> <span class="pre">diff</span></tt> (<a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-diff.html">git diff</a>).</p>
</li>
<li><p class="first">Add any new files to version control <tt class="docutils literal"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">new_file_name</span></tt> (see
<a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-add.html">git add</a>).</p>
</li>
<li><p class="first">To commit all modified files into the local copy of your repo,, do
<tt class="docutils literal"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-am</span> <span class="pre">'A</span> <span class="pre">commit</span> <span class="pre">message'</span></tt>.  Note the <tt class="docutils literal"><span class="pre">-am</span></tt> options to
<tt class="docutils literal"><span class="pre">commit</span></tt>. The <tt class="docutils literal"><span class="pre">m</span></tt> flag just signals that you&#8217;re going to type a
message on the command line.  The <tt class="docutils literal"><span class="pre">a</span></tt> flag — you can just take on
faith — or see <a class="reference external" href="http://www.gitready.com/beginner/2009/01/18/the-staging-area.html">why the -a flag?</a> — and the helpful use-case
description in the <a class="reference external" href="http://tomayko.com/writings/the-thing-about-git">tangled working copy problem</a>. The <a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-commit.html">git commit</a> manual
page might also be useful.</p>
</li>
<li><p class="first">To push the changes up to your forked repo on github, do a <tt class="docutils literal"><span class="pre">git</span>
<span class="pre">push</span></tt> (see <cite>git push</cite>).</p>
</li>
</ol>
</div>
</div>
<div class="section" id="ask-for-your-changes-to-be-reviewed-or-merged">
<h2>Ask for your changes to be reviewed or merged<a class="headerlink" href="#ask-for-your-changes-to-be-reviewed-or-merged" title="Permalink to this headline">¶</a></h2>
<p>When you are ready to ask for someone to review your code and consider a merge:</p>
<ol class="arabic">
<li><p class="first">Go to the URL of your forked repo, say
<tt class="docutils literal"><span class="pre">http://github.com/your-user-name/gitwash</span></tt>.</p>
</li>
<li><p class="first">Use the &#8216;Switch Branches&#8217; dropdown menu near the top left of the page to
select the branch with your changes:</p>
<img alt="../_images/branch_dropdown.png" src="../_images/branch_dropdown.png" />
</li>
<li><p class="first">Click on the &#8216;Pull request&#8217; button:</p>
<img alt="../_images/pull_button.png" src="../_images/pull_button.png" />
<p>Enter a title for the set of changes, and some explanation of what you&#8217;ve
done.  Say if there is anything you&#8217;d like particular attention for - like a
complicated change or some code you are not happy with.</p>
<p>If you don&#8217;t think your request is ready to be merged, just say so in your
pull request message.  This is still a good way of getting some preliminary
code review.</p>
</li>
</ol>
</div>
<div class="section" id="deleting-a-branch-on-github">
<h2>Deleting a branch on github<a class="headerlink" href="#deleting-a-branch-on-github" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>git checkout master
# delete branch locally
git branch -D my-unwanted-branch
# delete branch on github
git push origin :my-unwanted-branch</pre>
</div>
<p>(Note the colon <tt class="docutils literal"><span class="pre">:</span></tt> before <tt class="docutils literal"><span class="pre">test-branch</span></tt>.  See also:
<a class="reference external" href="http://github.com/guides/remove-a-remote-branch">http://github.com/guides/remove-a-remote-branch</a></p>
</div>
<div class="section" id="several-people-sharing-a-single-repository">
<h2>Several people sharing a single repository<a class="headerlink" href="#several-people-sharing-a-single-repository" title="Permalink to this headline">¶</a></h2>
<p>If you want to work on some stuff with other people, where you are all
committing into the same repository, or even the same branch, then just
share it via github.</p>
<p>First fork gitwash into your account, as from <a class="reference internal" href="forking_hell.html#forking"><em>Making your own copy (fork) of gitwash</em></a>.</p>
<p>Then, go to your forked repository github page, say
<tt class="docutils literal"><span class="pre">http://github.com/your-user-name/gitwash</span></tt></p>
<p>Click on the &#8216;Admin&#8217; button, and add anyone else to the repo as a
collaborator:</p>
<blockquote>
<div><img alt="../_images/pull_button.png" src="../_images/pull_button.png" />
</div></blockquote>
<p>Now all those people can do:</p>
<div class="highlight-python"><pre>git clone git@githhub.com:your-user-name/gitwash.git</pre>
</div>
<p>Remember that links starting with <tt class="docutils literal"><span class="pre">git&#64;</span></tt> use the ssh protocol and are
read-write; links starting with <tt class="docutils literal"><span class="pre">git://</span></tt> are read-only.</p>
<p>Your collaborators can then commit directly into that repo with the
usual:</p>
<div class="highlight-python"><pre>git commit -am 'ENH - much better code'
git push origin master # pushes directly into your repo</pre>
</div>
</div>
<div class="section" id="explore-your-repository">
<h2>Explore your repository<a class="headerlink" href="#explore-your-repository" title="Permalink to this headline">¶</a></h2>
<p>To see a graphical representation of the repository branches and
commits:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">gitk</span> <span class="o">--</span><span class="nb">all</span>
</pre></div>
</div>
<p>To see a linear list of commits for this branch:</p>
<div class="highlight-python"><pre>git log</pre>
</div>
<p>You can also look at the <a class="reference external" href="http://github.com/blog/39-say-hello-to-the-network-graph-visualizer">network graph visualizer</a> for your github
repo.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Development workflow</a><ul>
<li><a class="reference internal" href="#workflow-summary">Workflow summary</a></li>
<li><a class="reference internal" href="#make-a-branch-to-keep-track-of-trunk">Make a branch to keep track of trunk</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#in-detail">In detail</a></li>
</ul>
</li>
<li><a class="reference internal" href="#consider-deleting-your-master-branch">Consider deleting your master branch</a></li>
<li><a class="reference internal" href="#make-a-new-feature-branch">Make a new feature branch</a></li>
<li><a class="reference internal" href="#the-editing-workflow">The editing workflow</a><ul>
<li><a class="reference internal" href="#id2">Overview</a></li>
<li><a class="reference internal" href="#in-more-detail">In more detail</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ask-for-your-changes-to-be-reviewed-or-merged">Ask for your changes to be reviewed or merged</a></li>
<li><a class="reference internal" href="#deleting-a-branch-on-github">Deleting a branch on github</a></li>
<li><a class="reference internal" href="#several-people-sharing-a-single-repository">Several people sharing a single repository</a></li>
<li><a class="reference internal" href="#explore-your-repository">Explore your repository</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="configure_git.html"
                        title="previous chapter">Configure git</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="git_resources.html"
                        title="next chapter">git resources</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/gitwash/development_workflow.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="git_resources.html" title="git resources"
             >next</a> |</li>
        <li class="right" >
          <a href="configure_git.html" title="Configure git"
             >previous</a> |</li>
        <li><a href="../index.html">pydagogue 0.2 documentation</a> &raquo;</li>
          <li><a href="../gitwash_build.html" >Gitwash build</a> &raquo;</li>
          <li><a href="index.html" >Working with <em>gitwash</em> source code</a> &raquo;</li>
          <li><a href="git_development.html" >Git for development</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, 2010 - Matthew Brett.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1pre.
    </div>
  </body>
</html>